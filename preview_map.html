<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mapa 2026 — Preview (React + Tailwind CDN)</title>
  <!-- Use local fonts defined in layout/fonts.css (deterministic, no CDN) -->
  <link rel="stylesheet" href="layout/fonts.css">
  <script>
    // Tailwind Play CDN config: adiciona as fontes
    window.tailwind = {
      config: {
        theme: {
          extend: {
            fontFamily: {
              cormorant: ['"Cormorant Garamond"', 'serif'],
              inter: ['Inter','sans-serif']
            }
          }
        }
      }
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>body{background:#071019}</style>
</head>
<body>
  <div id="root"></div>

  <!-- React + Babel (in-browser JSX) -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <script type="text/babel">
    const { useState } = React;

    function Mapa2026(){
      const [mode,setMode] = React.useState('dark');
      const toggleMode = ()=> setMode(m=> m==='dark' ? 'light' : 'dark');
      return (
        <main className={"min-h-screen " + (mode==='dark' ? 'bg-neutral-950 text-neutral-100' : 'bg-white text-neutral-900')}>
          <div className="mx-auto max-w-[420px] px-6 py-20 space-y-24">

            <!-- header should be quiet and without controls per UX spec -->

            <header className="text-center" style={{marginBottom:32}}>
              <h1 className="font-cormorant text-4xl tracking-tight" style={{color:'#F5F5F5'}}>Mapa 2026</h1>
              <p className="font-inter text-base" style={{color:'#9A9A9A',marginTop:12}}>Um convite para atravessar o ano com mais consciência.</p>
            </header>

            <section className="space-y-6">
              <p className="uppercase tracking-widest text-xs text-neutral-500">Seu Ano Pessoal é</p>
              <div className="space-y-4" style={{marginTop:8,marginBottom:16}}>
                <p className="text-xs uppercase" style={{color:'#9A9A9A',letterSpacing:2}}>Seu Ano Pessoal é</p>
                <h2 className="font-cormorant" style={{fontSize:'96px',lineHeight:0.9,color:'#F5F5F5',margin:0}}>2</h2>
                <p className="font-inter" style={{color:'#C9C9C9',marginTop:8}}>Um ciclo que pede escuta, vínculo e escolhas feitas com sensibilidade.</p>
              </div>
            </section>

            <section className="space-y-4">
              <h2 className="font-cormorant text-2xl">O significado deste ano</h2>
              <p className="font-inter text-base leading-relaxed text-neutral-300">2026 não é sobre acelerar. É sobre ajustar. Refinar relações, perceber o clima emocional ao redor e agir com mais consciência do impacto das suas escolhas.</p>
            </section>

            <section className={"rounded-2xl px-6 py-16 text-center " + (mode==='dark' ? 'bg-neutral-900' : 'bg-neutral-100')} style={{marginTop:24,marginBottom:24}}>
              <p className="font-cormorant" style={{fontSize:'28px',lineHeight:1.4,color:'#F5F5F5',margin:0}}>“Escolher com calma também é uma forma de coragem.”</p>
            </section>

            <section className="space-y-6">
              <h2 className="font-cormorant text-2xl">As cores do seu ano</h2>
              <div className="flex items-center gap-4">
                <div className="h-20 w-20 rounded-full bg-[#F4A261]" />
                <div className="h-20 w-20 rounded-full bg-[#E9A0B8]" />
              </div>
              <p className="font-inter text-base text-neutral-400 leading-relaxed">O laranja sustenta o movimento com vitalidade. O rosa suaviza, protege e convida à empatia. Juntas, essas cores lembram que avançar não exige dureza.</p>
            </section>

            {/* Linha do tempo integrado ao ritmo narrativo */}
            <section className="space-y-6">
              <h3 className="font-cormorant text-xl">Linha do tempo</h3>
              <div className="space-y-4">
                <div className="rounded-lg p-4" style={{background: mode==='dark' ? 'rgba(255,255,255,0.03)' : '#f7fafc'}}>
                  <strong>2025 — Encerramento</strong>
                  <p className="text-sm">Fechou ciclos que abriram espaço para reorganizar prioridades.</p>
                </div>
                <div className="rounded-lg p-4" style={{background: mode==='dark' ? 'rgba(255,255,255,0.03)' : '#f7fafc'}}>
                  <strong>2026 — Presente</strong>
                  <p className="text-sm">Atenção às relações, ajuste e escuta.</p>
                </div>
                <div className="rounded-lg p-4" style={{background: mode==='dark' ? 'rgba(255,255,255,0.03)' : '#f7fafc'}}>
                  <strong>2027 — Curiosidade</strong>
                  <p className="text-sm">Sinais de mudança e expressão futura.</p>
                </div>
              </div>
            </section>

            <footer className="pt-12">
              <div style={{textAlign:'center',paddingTop:24}}>
                <button id="exportCTA" className="w-full rounded-full border border-neutral-700 py-4 font-inter text-sm transition" style={{maxWidth:360,margin:'0 auto'}}>Salvar este mapa</button>
              </div>
              <div style={{textAlign:'center',marginTop:20,color:'#9A9A9A'}}>
                <small className="font-cormorant" style={{color:'#9A9A9A'}}>Mapa 2026</small>
              </div>
            </footer>

          </div>
        </main>
      )
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<Mapa2026 />)
  </script>

  <script>
    // Attach handler for single CTA which opens a quiet modal with export choices
    function waitForRoot(){
      const btn = document.getElementById('exportCTA');
      if(!btn) return setTimeout(waitForRoot,200);

      function createModal(){
        const existing = document.getElementById('exportModal'); if(existing) return existing;
        const modal = document.createElement('div'); modal.id='exportModal';
        modal.style.position='fixed'; modal.style.inset='0'; modal.style.display='flex'; modal.style.alignItems='flex-end'; modal.style.justifyContent='center'; modal.style.background='rgba(2,6,23,0.45)'; modal.style.zIndex=10000;
        const sheet = document.createElement('div'); sheet.style.width='100%'; sheet.style.maxWidth='520px'; sheet.style.borderRadius='16px 16px 0 0'; sheet.style.padding='18px'; sheet.style.boxSizing='border-box'; sheet.style.background='linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
        sheet.innerHTML = `<div style="text-align:center;margin-bottom:10px"><strong class="font-cormorant">Salvar este mapa</strong><div style="height:10px"></div><p class="font-inter text-sm text-neutral-400">Escolha uma opção</p></div>`;
        const actions = document.createElement('div'); actions.style.display='flex'; actions.style.gap='10px';
        const btnFull = document.createElement('button'); btnFull.className='flex-1 rounded-full border py-3'; btnFull.textContent='Salvar imagem (página)';
        const btnStory = document.createElement('button'); btnStory.className='flex-1 rounded-full bg-yellow-400 text-black font-semibold py-3'; btnStory.textContent='Salvar Story 9:16';
        const btnClose = document.createElement('button'); btnClose.className='rounded px-3 py-2'; btnClose.textContent='Fechar'; btnClose.style.marginTop='12px';
        actions.appendChild(btnFull); actions.appendChild(btnStory);
        sheet.appendChild(actions); sheet.appendChild(btnClose);
        modal.appendChild(sheet);

        btnClose.addEventListener('click', ()=> modal.remove());

        btnFull.addEventListener('click', ()=>{
          html2canvas(document.querySelector('main'), {scale:2}).then(canvas=>{
            canvas.toBlob(b=>{ const url = URL.createObjectURL(b); const a=document.createElement('a'); a.href=url; a.download='mapa2026.png'; a.click(); URL.revokeObjectURL(url); modal.remove(); }, 'image/png');
          });
        });

        btnStory.addEventListener('click', ()=>{
          const frame = document.createElement('div'); frame.style.width='720px'; frame.style.height=(720*16/9)+'px'; frame.style.padding='36px'; frame.style.boxSizing='border-box'; frame.style.background=window.getComputedStyle(document.querySelector('main')).backgroundColor; frame.style.color=window.getComputedStyle(document.querySelector('main')).color; frame.innerHTML = document.querySelector('main').innerHTML;
          frame.style.position='fixed'; frame.style.left='-9999px'; document.body.appendChild(frame);
          html2canvas(frame, {scale:2}).then(canvas=>{
            canvas.toBlob(b=>{ const url = URL.createObjectURL(b); const a=document.createElement('a'); a.href=url; a.download='mapa2026-story.png'; a.click(); URL.revokeObjectURL(url); frame.remove(); modal.remove(); }, 'image/png');
          }).catch(e=>{ frame.remove(); modal.remove(); alert('Erro ao gerar PNG') });
        });

        document.body.appendChild(modal);
        return modal;
      }

      btn.addEventListener('click', ()=> createModal());
    }
    waitForRoot();
  </script>
</body>
</html>
