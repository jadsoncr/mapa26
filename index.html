
<!doctype html>
<html lang="pt-BR">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<style>
			/* Local fonts (if present in workspace/layout/fonts) */
			@font-face{font-family:'Cormorant Garamond';src:url('layout/fonts/CormorantGaramond-Regular.woff2') format('woff2');font-weight:400;font-style:normal;font-display:swap}
			@font-face{font-family:'Cormorant Garamond';src:url('layout/fonts/CormorantGaramond-SemiBold.woff2') format('woff2');font-weight:600;font-style:normal;font-display:swap}
			@font-face{font-family:'Inter';src:url('layout/fonts/Inter-Regular.woff2') format('woff2');font-weight:400;font-style:normal;font-display:swap}
				<link rel="stylesheet" href="layout/fonts.css">
				body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;max-width:1100px;margin:32px auto;padding:0 16px;color:#0f1720}
		#previewContainer{display:flex;flex-direction:column;gap:18px;padding:8px}
		#rawPanel{margin-top:18px}

		/* Card base */
		.card{background:#0f1720;color:#fff;border-radius:14px;padding:16px;box-shadow:0 6px 18px rgba(2,6,23,0.45);box-sizing:border-box}
		.cardInner{height:100%;display:flex;flex-direction:column}
		.cardBar{display:flex;gap:8px;justify-content:flex-end}
		.cardBar button{background:#111;color:#fff;border:0;padding:10px 12px;border-radius:10px;min-height:40px}
		.cardContent{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:8px}
<!doctype html>
<html lang="pt-BR">
  <head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Debug preview moved</title>
	<meta http-equiv="refresh" content="0;url=preview_map.html">
	<style>body{font-family:system-ui, -apple-system, Roboto, Arial;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;background:#0f1720;color:#fff}</style>
  </head>
  <body>
	<div style="text-align:center;max-width:560px;padding:24px">
	  <h1 style="margin:0 0 8px">Debug preview moved</h1>
	  <p style="margin:0 0 12px;color:#cbd5e1">O preview de debug foi movido para uma pasta de backstage para evitar exposi√ß√£o p√∫blica.</p>
	  <p style="margin:0;font-size:14px;color:#94a3b8">Voc√™ ser√° redirecionado para a p√°gina oficial.</p>
	</div>
  </body>
</html>
		"telas": {
			"tela1": "Seu Ano Pessoal em 2026 √©: 4\nEstrutura\nConcretizar com passos consistentes.",
			"tela2": [
				"Rotina e m√©todo ganham import√¢ncia.",
				"Energia para criar bases est√°veis.",
				"Foco em execu√ß√£o e sustenta√ß√£o."
			],
			"tela3": "Bases s√≥lidas ampliam op√ß√µes."
		},
		"linha_do_tempo": {
			"2025": "2025 ‚Äî 3 ‚Ä¢ Express√£o. Per√≠odo de ideias e exposi√ß√£o que pediu organiza√ß√£o posterior.",
			"2026": "2026 ‚Äî 4 ‚Ä¢ Estrutura. Aten√ß√£o a processo, rotina e constru√ß√£o de alicerces.",
			"2027": "2027 ‚Äî 5 ‚Ä¢ Mudan√ßa. Um ano com mais movimento e oportunidades. (Conte√∫do completo bloqueado)"
		},
		"cores": {
			"texto": "Suas cores em 2026\n\nüü§ Marrom\nüå≤ Verde escuro\n\nEnergia para viver este ciclo com mais consci√™ncia.",
			"cores_nomes": ["Marrom","Verde escuro"],
			"hex": ["#8B5E3C","#2F6B3A"]
		}
	},
	{
		"numero": 5,
		"tema": "Mudan√ßa",
		"telas": {
			"tela1": "Seu Ano Pessoal em 2026 √©: 5\nMudan√ßa\nConfian√ßa para experimentar o novo.",
			"tela2": [
				"Desejo de liberdade e novidade.",
				"Curiosidade por caminhos diferentes.",
				"Movimento que expande experi√™ncias."
			],
			"tela3": "Movimento que abre possibilidades."
		},
		"linha_do_tempo": {
			"2025": "2025 ‚Äî 4 ‚Ä¢ Estrutura. Per√≠odo de organiza√ß√£o que permitiu mais mobilidade.",
			"2026": "2026 ‚Äî 5 ‚Ä¢ Mudan√ßa. Um ano com mais movimento e explora√ß√£o pr√°tica.",
			"2027": "2027 ‚Äî 6 ‚Ä¢ Cuidado. Foco maior em rela√ß√µes pr√≥ximas e suporte m√∫tuo. (Conte√∫do completo bloqueado)"
		},
		"cores": {
			"texto": "Suas cores em 2026\n\nüî∑ Turquesa\nüü† Laranja\n\nEnergia para viver este ciclo com mais consci√™ncia.",
			"cores_nomes": ["Turquesa","Laranja"],
			"hex": ["#2EC4B6","#F4A261"]
		}
	},
	{
		"numero": 6,
		"tema": "Cuidado",
		"telas": {
			"tela1": "Seu Ano Pessoal em 2026 √©: 6\nCuidado\nAten√ß√£o pr√°tica √†s rela√ß√µes pr√≥ximas.",
			"tela2": [
				"Responsabilidade nas rela√ß√µes do dia a dia.",
				"Mais presen√ßa para cuidar e sustentar.",
				"Aten√ß√£o a detalhes que mant√™m equil√≠brio."
			],
			"tela3": "Gestos que sustentam o dia a dia."
		},
		"linha_do_tempo": {
			"2025": "2025 ‚Äî 5 ‚Ä¢ Mudan√ßa. Experi√™ncias que aumentaram aten√ß√£o √†s necessidades alheias.",
			"2026": "2026 ‚Äî 6 ‚Ä¢ Cuidado. Um ano para organizar suporte e responsabilidades afetivas.",
			"2027": "2027 ‚Äî 7 ‚Ä¢ Profundidade. Mais espa√ßo para estudo e interioriza√ß√£o. (Conte√∫do completo bloqueado)"
		},
		"cores": {
			"texto": "Suas cores em 2026\n\nüå∏ Rosa\nüåø Verde\n\nEnergia para viver este ciclo com mais consci√™ncia.",
			"cores_nomes": ["Rosa","Verde"],
			"hex": ["#F8BBD0","#6ABF69"]
		}
	},
	{
		"numero": 7,
		"tema": "Profundidade",
		"telas": {
			"tela1": "Seu Ano Pessoal em 2026 √©: 7\nProfundidade\nMomento para aprofundar entendimentos.",
			"tela2": [
				"Tempo para estudo e sil√™ncio reflexivo.",
				"Valoriza√ß√£o do recolhimento e an√°lise.",
				"Busca por clareza interna na rotina."
			],
			"tela3": "Clareza nasce do sil√™ncio atento."
		},
		"linha_do_tempo": {
			"2025": "2025 ‚Äî 6 ‚Ä¢ Cuidado. Per√≠odo de responsabilidades que trouxe reflex√£o.",
			"2026": "2026 ‚Äî 7 ‚Ä¢ Profundidade. Um ano para consolidar entendimento e pesquisa pessoal.",
			"2027": "2027 ‚Äî 8 ‚Ä¢ Poder pessoal. Mais a√ß√£o pr√°tica e gest√£o de resultados. (Conte√∫do completo bloqueado)"
		},
		"cores": {
			"texto": "Suas cores em 2026\n\nüü£ Roxo\nüîµ Azul profundo\n\nEnergia para viver este ciclo com mais consci√™ncia.",
			"cores_nomes": ["Roxo","Azul profundo"],
			"hex": ["#6A4C93","#244273"]
		}
	},
	{
		"numero": 8,
		"tema": "Poder pessoal",
		"telas": {
			"tela1": "Seu Ano Pessoal em 2026 √©: 8\nPoder pessoal\nTomar decis√µes com clareza de prop√≥sito.",
			"tela2": [
				"Sensa√ß√£o de assumir responsabilidade maior.",
				"Foco em metas e recursos concretos.",
				"Centralidade na gest√£o do pr√≥prio caminho."
			],
			"tela3": "A√ß√£o alinhada √† sua dire√ß√£o."
		},
		"linha_do_tempo": {
			"2025": "2025 ‚Äî 7 ‚Ä¢ Profundidade. Trabalho interno que preparou mais presen√ßa pr√°tica.",
			"2026": "2026 ‚Äî 8 ‚Ä¢ Poder pessoal. Ano de assumir gest√£o e responsabilidade por resultados.",
			"2027": "2027 ‚Äî 9 ‚Ä¢ Encerramento. S√≠ntese de um ciclo antes de novos recome√ßos. (Conte√∫do completo bloqueado)"
		},
		"cores": {
			"texto": "Suas cores em 2026\n\n‚¨õ Preto\n‚ú® Dourado\n\nEnergia para viver este ciclo com mais consci√™ncia.",
			"cores_nomes": ["Preto","Dourado"],
			"hex": ["#000000","#D4AF37"]
		}
	},
	{
		"numero": 9,
		"tema": "Encerramento",
		"telas": {
			"tela1": "Seu Ano Pessoal em 2026 √©: 9\nEncerramento\nReconhecer o que chegou ao fim.",
			"tela2": [
				"Sensa√ß√£o de fechamento de ciclos.",
				"S√≠ntese do que foi aprendido recentemente.",
				"Espa√ßo interno para reorganizar inten√ß√µes."
			],
			"tela3": "Espa√ßo para novos ciclos."
		},
		"linha_do_tempo": {
			"2025": "2025 ‚Äî 8 ‚Ä¢ Poder pessoal. Gest√£o e resultados que antecederam fechamento de temas.",
			"2026": "2026 ‚Äî 9 ‚Ä¢ Encerramento. Um ano para concluir e sintetizar aprendizados.",
			"2027": "2027 ‚Äî 1 ‚Ä¢ In√≠cio. Sinais de recome√ßo com nova energia. (Conte√∫do completo bloqueado)"
		},
		"cores": {
			"texto": "Suas cores em 2026\n\n‚ö™ Branco\nüü£ Violeta\n\nEnergia para viver este ciclo com mais consci√™ncia.",
			"cores_nomes": ["Branco","Violeta"],
			"hex": ["#FFFFFF","#7D3C98"]
		}
	}
]</script>
	<script>
		const PATH_BANCO = 'editorial/banco_editorial_ano_pessoal_2026.json';
		const PATH_EXP = 'editorial/experiencia_gratuita_sprint2_2026.json';
		let banco=null, exper=null;

		async function fetchJson(path){
			// if embedded JSON exists (for file:// usage), prefer that
			try{
				if(path.includes('banco')){
					const el = document.getElementById('__banco_data');
					if(el) return JSON.parse(el.textContent);
				}
				if(path.includes('experiencia') || path.includes('experienc')){
					const el = document.getElementById('__exp_data');
					if(el) return JSON.parse(el.textContent);
				}
			}catch(e){ /* ignore and fallback to fetch */ }
			const res = await fetch(path);
			if(!res.ok) throw new Error(res.status+': '+res.statusText);
			return res.json();
		}

		function cleanText(s){
			if(!s) return '';
			return String(s).replace(/\(Conte√∫do.*\)/g,'').trim();
		}

		function nlToParagraphs(s){
			if(!s) return null;
			return String(s).split(/\n+/).map(str=>str.trim()).filter(Boolean);
		}

		function createCardHtml(type, payload){
			// returns DOM element
			const card = document.createElement('div');
			card.className = 'card';
			// accent color
			const accent = (payload.hex && payload.hex[0]) || '#F4A261';
			card.style.borderLeft = `8px solid ${accent}`;

			const inner = document.createElement('div');
			inner.className = 'cardInner';

			const content = document.createElement('div'); content.className='cardContent';

			if(type==='tela1'){
				const parts = nlToParagraphs(cleanText(payload));
				if(parts && parts.length){
					const h = document.createElement('h1'); h.className='t1'; h.textContent = parts.join(' ‚Äî ');
					content.appendChild(h);
				}
			} else if(type==='tela2'){
				const arr = payload;
				const ul = document.createElement('div'); ul.className='t2';
				(arr||[]).forEach(p=>{ const pEl = document.createElement('p'); pEl.textContent = cleanText(p); ul.appendChild(pEl); });
				content.appendChild(ul);
			} else if(type==='tela3'){
				const p = document.createElement('p'); p.className='t3'; p.textContent = cleanText(payload); content.appendChild(p);
			} else if(type==='cores'){
				const title = document.createElement('h3'); title.textContent='Suas cores em 2026'; content.appendChild(title);
				const dots = document.createElement('div'); dots.className='dots';
				(payload.cores_nomes||[]).forEach((name,i)=>{
					const wrap = document.createElement('div'); wrap.className='dotItem';
					const dot = document.createElement('span'); dot.className='dot'; dot.style.background = (payload.hex&&payload.hex[i])||'#eee';
					const lab = document.createElement('div'); lab.textContent = name; lab.className='dotLabel';
					wrap.appendChild(dot); wrap.appendChild(lab); dots.appendChild(wrap);
				});
				content.appendChild(dots);
				const txt = document.createElement('p'); txt.textContent = cleanText(payload.texto); content.appendChild(txt);
			} else if(type==='linha'){
				const box = document.createElement('div'); box.className='timeline';
				['2025','2026','2027'].forEach(y=>{
					const b = document.createElement('div'); b.className='tlBlock';
					const h = document.createElement('strong'); h.textContent = y; b.appendChild(h);
					const v = payload[y] ? cleanText(payload[y]) : ''; const p = document.createElement('p'); p.textContent = v; b.appendChild(p);
					box.appendChild(b);
				});
				content.appendChild(box);
			}

			inner.appendChild(content);
			card.appendChild(inner);

			// selectable
			card.addEventListener('click', ()=>{
				document.querySelectorAll('.card').forEach(c=>c.classList.remove('selected'));
				card.classList.add('selected');
			});

			return card;
		}

		function copyTextFromCard(card){
			if(!card){ showToast('Nenhum cart√£o selecionado'); return }
			const txt = card.querySelector('.cardContent').innerText;
			navigator.clipboard.writeText(txt).then(()=>showToast('Copiado'), ()=>showToast('Falha ao copiar'));
		}

		async function shareCard(card){
			if(!card){ showToast('Nenhum cart√£o selecionado'); return }
			const text = card.querySelector('.cardContent').innerText;
			if(navigator.share){
				try{ await navigator.share({text}); showToast('Compartilhado') }catch(e){ showToast('Compartilhar cancelado') }
			} else {
				try{ await navigator.clipboard.writeText(text); showToast('Compartilhamento n√£o dispon√≠vel. Texto copiado.') }catch(e){ showToast('Falha ao copiar.') }
			}
		}

		function saveCardImage(card){
			if(!card){ showToast('Nenhum cart√£o selecionado'); return }
			html2canvas(card, {scale:2}).then(canvas=>{
				canvas.toBlob(blob=>{
					const url = URL.createObjectURL(blob);
					const a = document.createElement('a'); a.href = url; a.download = 'card.png'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
					showToast('Imagem gerada');
				}, 'image/png');
			}).catch(e=>showToast('Falha ao gerar imagem'));
		}

		function showToast(msg){
			let t = document.getElementById('toast');
			if(!t){ t = document.createElement('div'); t.id='toast'; t.style.position='fixed'; t.style.bottom='18px'; t.style.left='50%'; t.style.transform='translateX(-50%)'; t.style.background='rgba(15,23,32,0.95)'; t.style.color='#fff'; t.style.padding='10px 14px'; t.style.borderRadius='10px'; t.style.zIndex=9999; document.body.appendChild(t); }
			t.textContent = msg; t.style.opacity=1; clearTimeout(t._timeout); t._timeout = setTimeout(()=>{ t.style.opacity=0; }, 2200);
		}

		function renderForNumber(n){
			const p = exper.find(r=>r.numero===n);
			const preview = document.getElementById('previewContainer'); preview.innerHTML='';
			if(!p){ preview.textContent='N√∫mero n√£o encontrado'; return }

			// order: tela1, tela2, tela3, cores, linha do tempo, CTA
			const tela1 = createCardHtml('tela1', p.telas.tela1);
			const tela2 = createCardHtml('tela2', p.telas.tela2);
			const tela3 = createCardHtml('tela3', p.telas.tela3);
			const cores = createCardHtml('cores', p.cores);
			const linha = createCardHtml('linha', p.linha_do_tempo);

			preview.appendChild(tela1);
			preview.appendChild(tela2);
			preview.appendChild(tela3);
			preview.appendChild(cores);
			preview.appendChild(linha);

			// mark first card selected
			const first = preview.querySelector('.card'); if(first){ first.classList.add('selected'); }

			// CTA card
			const cta = document.createElement('div'); cta.className='card ctaCard'; cta.style.borderLeft='8px solid transparent';
			cta.innerHTML = `<div class="cardInner"><div class="cardContent"><h2>Quer entender por que este √© o seu ciclo e como usar esse movimento a seu favor?</h2><div style="margin-top:12px"><button id="btnMap">Ver o Mapa completo</button></div></div></div>`;
			preview.appendChild(cta);
			cta.querySelector('#btnMap').addEventListener('click', ()=>alert('Transi√ß√£o suave: Ver o Mapa completo (n√£o implementado)'));
		}

		document.getElementById('btnGen').addEventListener('click', async ()=>{
			try{
				if(!banco) banco = await fetchJson(PATH_BANCO);
				if(!exper) exper = await fetchJson(PATH_EXP);
				const n = parseInt(document.getElementById('selNum').value,10);
				renderForNumber(n);
			}catch(e){ alert('Erro: '+e); }
		});

		document.getElementById('btnLoadRaw').addEventListener('click', async ()=>{
			try{
				const d1 = await fetchJson(PATH_BANCO); const d2 = await fetchJson(PATH_EXP);
				document.getElementById('out').textContent = JSON.stringify({banco:d1,exper:d2},null,2);
			}catch(e){ document.getElementById('out').textContent='Erro: '+e }
		});

		// global actions
		document.getElementById('actCopy').addEventListener('click', ()=>{ copyTextFromCard(document.querySelector('.card.selected')) });
		document.getElementById('actShare').addEventListener('click', ()=>{ shareCard(document.querySelector('.card.selected')) });
		document.getElementById('actSave').addEventListener('click', ()=>{ saveCardImage(document.querySelector('.card.selected')) });
	</script>

	<style>
		/* Preview styles */
		body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;max-width:1100px;margin:32px auto;padding:0 16px}
		.layoutRow{display:block}
		#previewContainer{display:flex;flex-direction:column;gap:14px;padding:8px}
		#rawPanel{margin-top:18px}
		.card{background:#0f1720;color:#fff;border-radius:14px;padding:12px;box-shadow:0 6px 18px rgba(2,6,23,0.45);box-sizing:border-box}
		.cardInner{height:100%;display:flex;flex-direction:column}
		.cardBar{display:flex;gap:8px;justify-content:flex-end}
		.cardBar button{background:#111;color:#fff;border:0;padding:6px 8px;border-radius:8px}
		.cardContent{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;padding:6px}
		.card h1.t1{font-size:28px;margin:8px 0}
		.card p.t3{font-size:20px;margin:6px 0}
		.card .t2 p{margin:6px 0;font-size:16px}
		.dots{display:flex;gap:12px;align-items:center}
		.dotItem{display:flex;gap:8px;align-items:center}
		.dot{width:28px;height:28px;border-radius:50%;display:inline-block}
		.dotLabel{font-size:16px}
		.timeline{display:flex;gap:8px;width:100%}
		.tlBlock{flex:1;background:rgba(255,255,255,0.04);padding:8px;border-radius:8px}
		.ctaCard .cardContent{align-items:center;text-align:center}
		.ctaCard #btnMap{background:#D4AF37;color:#071019;border:0;padding:12px 18px;border-radius:12px;font-weight:700}
		.card.selected{outline:3px solid rgba(212,175,55,0.12);transform:translateY(-4px)}
		/* raw panel styles */
		#rawPanel pre{background:#f6f8fa;color:#0f1720;padding:12px;border-radius:10px;max-height:70vh;overflow:auto}

		@media(min-width:900px){
			.layoutRow{display:flex;gap:28px;align-items:flex-start;max-width:1100px;margin:0 auto}
			#previewContainer{flex:0 0 420px}
			#rawPanel{flex:1}
		}
		@media(max-width:420px){ body{padding:12px} .card h1.t1{font-size:22px} }
	</style>
</body>
</html>
